<%- include('../../views/partials/user/header.ejs') %>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
<link rel="stylesheet" href="/css/user/shop/home.css">

<section class="hero-fluid">
    <div class="container-fluid p-0">
        <div class="row g-0 align-items-stretch">
            <div class="col-lg-6 d-flex align-items-center">
                <div class="hero-content-area">
                    <span class="hero-brand-display">GlowAura</span>
                    
                    <h1 class="hero-title mb-4">Illuminate <br> Your Aura</h1>
                    <p class="hero-text mb-2">Glow Naturally. Feel the Aura. Discover luxury</p>
                    <p class="hero-text mb-5">skincare that enhances your natural radiance.</p>
                    <a href="/products"><button class="btn btn-shop">Shop Now</button></a>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="hero-image-wrap">
                    <img src="./images/heroimage.png" alt="GlowAura Brand" class="hero-img-fluid">
                </div>
            </div>
        </div>
    </div>
</section>

<section class="py-5 mt-5">
    <div class="container-fluid custom-container">
        <h2 class="mb-5 fw-bold text-center">Shop by Category</h2>
        <div class="category-slider-container">
            <div class="swiper categorySwiper">
                <div class="swiper-wrapper">
                    <% if (categories && categories.length > 0) { %>
                        <% for (let i = 0; i < categories.length; i++) { 
                            let cat = categories[i]; %>
                            <div class="swiper-slide">
                                <a href="/products?cat=<%= cat._id %>" class="text-decoration-none text-dark">
                                    <div class="category-card" style="background-image: url('<%= cat.image %>');"></div>
                                    <div class="category-title">
                                        <%= cat.name %> 
                                    </div>
                                </a>
                            </div>
                        <% } %>
                    <% } %>
                </div>
                <div class="swiper-button-next swiper-nav-btn"></div>
                <div class="swiper-button-prev swiper-nav-btn"></div>
            </div>
        </div>
    </div>
</section>

<section class="py-5 bg-white">
  <div class="container-fluid custom-container">
    <h2 class="mb-5 fw-bold text-center">Featured Products</h2>

    <div class="row g-4">
      <% for (let i = 0; i < products.length; i++) { %>

        <div class="col-xl-3 col-lg-4 col-6">
          <div class="card product-card">

            <% if (products[i].variants?.length) {
              const v = products[i].variants[0];
              if (v.sale_price < v.regular_price) {
                const discount = Math.round(
                  ((v.regular_price - v.sale_price) / v.regular_price) * 100
                );
            %>
              <div class="discount-badge"><%= discount %>% OFF</div>
            <% } } %>

            <!-- Product Image -->
            <a href="/product/<%= products[i]._id %>">
              <img
                src="<%= products[i].images[0].url %>"
                class="product-img"
                alt="<%= products[i].productName %>"
              >
            </a>

            <div class="card-body p-4">
              <h5 class="product-title"><%= products[i].productName %></h5>

              <div class="d-flex justify-content-between align-items-center mt-3">
                <div>
                  <% if (products[i].variants?.length) {
                    const v = products[i].variants[0]; %>

                    <span class="sale-price">₹<%= v.sale_price %></span>

                    <% if (v.sale_price < v.regular_price) { %>
                      <span class="text-muted text-decoration-line-through ms-2 small">
                        ₹<%= v.regular_price %>
                      </span>
                    <% } %>

                  <% } %>
                </div>

                <a href="/addToWishlist?id=<%= products[i]._id %>" class="text-danger fs-5">
                  <i class="bi bi-heart"></i>
                </a>
              </div>
            </div>

          </div>
        </div>

      <% } %>
    </div>
  </div>
</section>


<section class="py-5" id="about">
    <div class="container">
        <div class="row g-5 align-items-center">
            <div class="col-lg-5">
                <img src="./images/why.jpg" alt="Why GlowAura" class="img-fluid rounded-4 shadow-lg">
            </div>
            <div class="col-lg-7">
                <div class="ps-lg-5">
                    <h2 class="mb-4">Crafted for Your Skin's <br><span style="color: var(--primary-brand)">Natural Brilliance</span></h2>
                    <div class="row g-4">
                        <div class="col-md-6">
                            <h6 class="fw-bold"><i class="bi bi-check2-circle text-success me-2"></i>Natural Ingredients</h6>
                            <p class="text-muted small">Finest organic botanical extracts sourced globally.</p>
                        </div>
                        <div class="col-md-6">
                            <h6 class="fw-bold"><i class="bi bi-check2-circle text-success me-2"></i>Cruelty-Free</h6>
                            <p class="text-muted small">We never test on animals. Ever.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="py-5 bg-light border-top border-bottom">
    <div class="container">
        <div class="row text-center">
            <div class="col-lg-4 border-end">
                <div class="p-3">
                    <i class="bi bi-truck fs-1 text-muted mb-3 d-block"></i>
                    <h5 class="fw-bold">Free Shipping</h5>
                    <p class="text-muted small">On all orders over ₹999</p>
                </div>
            </div>
            <div class="col-lg-4 border-end">
                <div class="p-3">
                    <i class="bi bi-shield-check fs-1 text-muted mb-3 d-block"></i>
                    <h5 class="fw-bold">Dermatologist Tested</h5>
                    <p class="text-muted small">Safe for all sensitive skin types</p>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="p-3">
                    <i class="bi bi-lock fs-1 text-muted mb-3 d-block"></i>
                    <h5 class="fw-bold">Secure Payment</h5>
                    <p class="text-muted small">100% encrypted transactions</p>
                </div>
            </div>
        </div>
    </div>
</section>

<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
<script src="/js/user/shop/home.js"></script>

<%- include('../../views/partials/user/footer.ejs') %>