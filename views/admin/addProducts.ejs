
<%- include('../../views/partials/admin/header.ejs') %>

<form action="/admin/products/add" method="POST" enctype="multipart/form-data"  id="addProduct">

  <!-- PAGE HEADER -->
  <div class="d-flex align-items-center mb-4 py-2 px-4">
   
    <div class="d-flex justify-content-between align-items-start mb-3">
      <div>
        <h4 class="fw-semibold mb-1">Add New Product</h4>
        <p class="text-muted mb-0" style="font-size: 1.2rem;">
          Create a new product
        </p>
      </div>
      </div>
    <button type="submit" class="btn  ms-auto px-4" style="background-color:#b8c9ae; border:none;" >
      <i class="bi bi-check2-circle me-1"></i> Save Product
    </button>
  </div>


  <div class="row py-2 px-4">

    <!-- LEFT SECTION -->
    <div class="col-lg-8 ">

      <!-- BASIC INFORMATION -->
      <div class="bg-white p-4 rounded-3 shadow-sm mb-4">
        <h5 class="fw-semibold mb-3">Basic Information</h5>

        <!-- Product Name -->
        <div class="mb-3">
          <label class="form-label fw-medium">Product Name <span class="text-danger">*</span></label>
          <input type="text" name="productName" class="form-control" placeholder="Enter product name">
          <div id="error-productName" class="text-danger small"></div>
        </div>

        <!-- Description -->
        <div class="mb-3">
          <label class="form-label fw-medium">Description <span class="text-danger">*</span></label>
          <textarea name="description" class="form-control" rows="4" placeholder="Enter product description"></textarea>
            <div id="error-description" class="text-danger small"></div>
        </div>

        <!-- Category + SKU -->
        <div class="row">
          <div class="col-md-6 mb-3">
            <label class="form-label fw-medium">Category <span class="text-danger">*</span></label>
            <select name="category" class="form-select" >
               
                <% for(let i=0;i<cat.length;i++){%>
              <option value="<%=cat[i].name%>"><%=cat[i].name%></option>
              <%}%>
            </select>
             <div id="error-category" class="text-danger small"></div>
          </div>
        </div>

      </div>

      <!-- PRICING & INVENTORY -->
<div class="bg-white p-4 rounded-3 shadow-sm mb-4">
  <h5 class="fw-semibold mb-3">Pricing and Inventory</h5>
  
  <div id="variantContainer">
    <!-- First variant row -->
    <div class="variant-row mb-3">
      <div class="d-flex gap-3 align-items-start">
        <div class="flex-fill">
          <input type="text" name="variantName[]" class="form-control" placeholder="Size (e.g., 50ml)">
          <div class="variant-error text-danger small"></div>
        </div>
        <div class="flex-fill">
          <input type="number" name="variantPrice[]" step="0.01" class="form-control" placeholder="Price ($)">
          <div class="variant-error text-danger small"></div>
        </div>
        <div class="flex-fill">
          <input type="number" name="variantStock[]" class="form-control" placeholder="Stock">
          <div class="variant-error text-danger small"></div>
        </div>
        <button type="button" class="btn btn-light border removeVariant" style="min-width: 40px;">
          <i class="bi bi-x-lg"></i>
        </button>
      </div>
    </div>
  </div>

  <div id="variant-main-error" class="text-danger small mb-2"></div>

  <button type="button" id="addVariantBtn" class="btn btn-outline-secondary rounded-pill mt-2">
    <i class="bi bi-plus-lg me-1"></i> Add Variant
  </button>
</div>
    </div>


    <!-- RIGHT SECTION -->
    <div class="col-lg-4">

      <!-- VISIBILITY -->
      <div class="bg-white p-4 rounded-3 shadow-sm mb-4">
        <h5 class="fw-semibold mb-3">Product Visibility</h5>

        <div class="d-flex justify-content-between align-items-center mb-3">
          <span class="fw-medium">Featured Product</span>
          <div class="form-check form-switch">
            <input class="form-check-input" name="featured" type="checkbox">
          </div>
        </div>

        <label class="fw-medium">Product Status</label>
        <select name="status" class="form-select">
          <option value="Listed">Listed</option>
          <option value="Unlisted">Unlisted</option>
        </select>
      </div>

  

<!-- PRODUCT IMAGES -->
<div class="bg-white p-4 rounded-3 shadow-sm mb-4">
  <h5 class="fw-semibold mb-3">Product Images</h5>

  <div class="border border-2 border-dashed rounded-3 p-4 text-center" style="border-style:dashed;" id="uploadArea">
    <i class="bi bi-upload fs-2 text-muted"></i>
    <p class="mb-0 mt-2 text-muted">Click to upload <br> or drag and drop</p>
    <small class="text-muted">PNG, JPG, JPEG (MAX. 2MB per image)</small>

    <input type="file"
           name="images"
           id="Images"
           class="form-control mt-3"
           multiple
           accept="image/png, image/jpeg, image/jpg">
  </div>
  
  <!-- Image Thumbnails Container -->
  <div id="imageThumbnails" class="row g-3 mt-3"></div>
  
  <div id="imageError" class="text-danger small mt-2"></div>
  <div id="imageCount" class="text-muted small mt-2"></div>
</div>

    </div>

  </div>

</form>

<link rel="stylesheet" href = "/css/admin/add.product.css">
<script src="/js/admin/product/add.product.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.6.1/cropper.min.css">
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.6.1/cropper.min.js"></script>




